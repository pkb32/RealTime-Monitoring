import React, { useState } from "react";
import { Line } from "react-chartjs-2";
import { Link } from "react-router-dom";

const LoadCell = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [selectedLevel, setSelectedLevel] = useState(null);
  const [selectedCrossCut, setSelectedCrossCut] = useState(null);

  const levels = {
    "Level 12": ["L12 North 7 X-cut", "L12 South 61 X-cut"],
    "Level 13": ["L13 South 49 X-cut"],
  };

  // Example datasets for different cross-cuts
  const dataSets = {
    "L12 North 7 X-cut": {
      labels: ['13-05-2022', '15-05-2022', '16-05-2022', '17-05-2022', '18-05-2022', '19-05-2022', '23-05-2022', '27-05-2022',
         '31-05-2022', '07-06-2022', '14-06-2022', '21-06-2022', '28-06-2022', '05-07-2012', '12-07-2022', '19-07-2022', 
         '26-07-2022', '02-08-2022', '09-08-2022', '16-08-2022', '23-08-2022', '30-08-2022', '06-09-2022', '13-09-2022', 
         '20-09-2022', '27-09-2022', '04-10-2022', '11-10-2022', '18-10-2022', '25-10-2022', '04-11-2022', '11-11-2022', 
         '18-11-2022', '25-11-2022', '02-12-2022', '09-12-2022', '16-12-2022', '23-12-2022', '30-12-2022', '06-01-2023', 
         '13-01-2023', '20-01-2023', '27-01-2023', '03-02-2023', '10-02-2023', '17-02-2023', '24-02-2023', '03-03-2023', 
         '10-03-2023', '17-03-2023', '24-03-2023', '31-03-2023', '07-04-2023', '14-04-2023', '21-04-2023', '28-04-2023', 
         '05-05-2023', '12-05-2023', '19-05-2023', '26-05-2023', '02-06-2023', '09-06-2023', '16-06-2023', '23-06-2023', 
         '30-06-2023', '07-07-2023', '14-07-2023', '21-07-2023', '28-07-2023', '04-08-2023', '11-08-2023', '18-08-2023', 
         '25-08-2023', '01-09-2023', '08-09-2023', '15-09-2023', '22-09-2023', '29-09-2023', '06-10-2023', '13-10-2023', 
         '20-10-2023', '27-10-2023', '03-11-2023', '10-11-2023', '17-11-2023', '24-11-2023', '01-12-2023', '08-12-2023', 
         '15-12-2023', '22-12-2023', '29-12-2024', '05-01-2024', '12-01-2024', '19-01-2024', '28-01-2024', '04-02-2024', 
         '11-02-2024', '18-02-2024', '25-02-2024', '03-03-2024', '10-03-2024', '17-03-2024', '24-03-2024', '31-03-2024', 
         '07-04-2024', '14-04-2024', '21-04-2024', '28-04-2024', '05-05-2024', '12-05-2024', '19-05-2024', '26-05-2024', 
         '02-06-2024', '09-06-2024', '16-06-2024', '23-06-2024', '30-06-2024', '07-07-2024', '14-07-2024', '21-07-2024', 
         '28-07-2024', '04-08-2024', '11-08-2024', '18-08-2024', '25-08-2024', '01-09-2024', '08-09-2024', '15-09-2024', 
         '22-09-2024', '29-09-2024', '06-10-2024', '13-10-2024', '20-10-2024', '27-10-2024', '05-11-2024', '12-11-2024', 
         '19-11-2024', '26-11-2024', '03-12-2024', '10-12-2024', '17-12-2024'],
      values: [0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 
        0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, -0.17, -0.17,
         -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, 
         -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, 
         -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, 
         -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, 
         -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, 
         -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, 
         -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, -0.17, 
         -0.17],
      info: {
        instrument: "210612",
        location: "Level 12 North, 7 X cut",
        installation: "From May 2022 to December 2024",
        temp: "22°C",
        height: "15 Mtr",
        observation: "Strata is stable, no critical changes observed.",
      },
    },
    "L12 South 61 X-cut": {
      labels: ['13-05-2022', '15-05-2022', '16-05-2022', '17-05-2022', '18-05-2022', '19-05-2022', '23-05-2022', 
        '27-05-2022', '31-05-2022', '07-06-2022', '14-06-2022', '21-06-2022', '28-06-2022', '05-07-2012', '12-07-2022', 
        '19-07-2022', '26-07-2022', '02-08-2022', '09-08-2022', '16-08-2022', '23-08-2022', '30-08-2022', '06-09-2022', 
        '13-09-2022', '20-09-2022', '27-09-2022', '04-10-2022', '11-10-2022', '18-10-2022', '25-10-2022', '04-11-2022', 
        '11-11-2022', '18-11-2022', '25-11-2022', '02-12-2022', '09-12-2022', '16-12-2022', '23-12-2022', '30-12-2022', 
        '06-01-2023', '13-01-2023', '20-01-2023', '27-01-2023', '03-02-2023', '10-02-2023', '17-02-2023', '24-02-2023', 
        '03-03-2023', '10-03-2023', '17-03-2023', '24-03-2023', '31-03-2023', '07-04-2023', '14-04-2023', '21-04-2023', 
        '28-04-2023', '05-05-2023', '12-05-2023', '19-05-2023', '26-05-2023', '02-06-2023', '09-06-2023', '16-06-2023', 
        '23-06-2023', '30-06-2023', '07-07-2023', '14-07-2023', '21-07-2023', '28-07-2023', '04-08-2023', '11-08-2023', 
        '18-08-2023', '25-08-2023', '01-09-2023', '08-09-2023', '15-09-2023', '22-09-2023', '29-09-2023', '06-10-2023', 
        '13-10-2023', '20-10-2023', '27-10-2023', '03-11-2023', '10-11-2023', '17-11-2023', '24-11-2023', '01-12-2023', 
        '08-12-2023', '15-12-2023', '22-12-2023', '29-12-2024', '05-01-2024', '12-01-2024', '19-01-2024', '28-01-2024', 
        '04-02-2024', '11-02-2024', '18-02-2024', '25-02-2024', '03-03-2024', '10-03-2024', '17-03-2024', '24-03-2024', 
        '31-03-2024', '07-04-2024', '14-04-2024', '21-04-2024', '28-04-2024', '05-05-2024', '12-05-2024', '19-05-2024', 
        '26-05-2024', '02-06-2024', '09-06-2024', '16-06-2024', '23-06-2024', '30-06-2024', '07-07-2024', '14-07-2024', 
        '21-07-2024', '28-07-2024', '04-08-2024', '11-08-2024', '18-08-2024', '25-08-2024', '01-09-2024', '08-09-2024', 
        '15-09-2024', '22-09-2024', '29-09-2024', '06-10-2024', '13-10-2024'],
      values: [0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,
         0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, -0.21, -0.21, 
         -0.21, -0.21, -0.21, -0.21, -0.21, -0.21, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36,
          -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36,
           -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36,
            -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, -0.36, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 
            0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 
            0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50, 0.50],
      info: {
        instrument: "210613",
        location: "Level 12 South, 61 X cut",
        installation: "From May 2022 to October 2024",
        temp: "22°C",
        height: "25 Mtr",
        observation: "Minor deviations detected, but within safe limits.",
      },
    },
   
    "L13 South 49 X-cut": {
      labels: ['13-05-2022', '15-05-2022', '16-05-2022', '17-05-2022', '18-05-2022', '19-05-2022', '23-05-2022',
        '27-05-2022', '31-05-2022', '07-06-2022', '14-06-2022', '21-06-2022', '28-06-2022', '05-07-2012', '12-07-2022',
         '19-07-2022', '26-07-2022', '02-08-2022', '09-08-2022', '16-08-2022', '23-08-2022', '30-08-2022', '06-09-2022',
          '13-09-2022', '20-09-2022', '27-09-2022', '04-10-2022', '11-10-2022', '18-10-2022', '25-10-2022', '04-11-2022'
          , '11-11-2022', '18-11-2022', '25-11-2022', '02-12-2022', '09-12-2022', '16-12-2022', '23-12-2022', 
          '30-12-2022', '06-01-2023', '13-01-2023', '20-01-2023', '27-01-2023', '03-02-2023', '10-02-2023', '17-02-2023',
           '24-02-2023', '03-03-2023', '10-03-2023', '17-03-2023', '24-03-2023', '31-03-2023', '07-04-2023', '14-04-2023', 
           '21-04-2023', '28-04-2023', '05-05-2023', '12-05-2023', '19-05-2023', '26-05-2023', '02-06-2023', '09-06-2023', 
           '16-06-2023', '23-06-2023', '30-06-2023', '07-07-2023', '14-07-2023', '21-07-2023', '28-07-2023', '04-08-2023', 
           '11-08-2023', '18-08-2023', '25-08-2023', '01-09-2023', '08-09-2023', '15-09-2023', '22-09-2023', '29-09-2023', 
           '06-10-2023', '13-10-2023', '20-10-2023', '27-10-2023', '03-11-2023', '10-11-2023', '17-11-2023', '24-11-2023', 
           '01-12-2023', '08-12-2023', '15-12-2023', '22-12-2023', '29-12-2024', '05-01-2024', '12-01-2024', '19-01-2024', 
           '28-01-2024', '04-02-2024', '11-02-2024', '18-02-2024', '25-02-2024', '03-03-2024', '10-03-2024', '17-03-2024', 
           '24-03-2024', '31-03-2024', '07-04-2024', '14-04-2024', '21-04-2024', '28-04-2024', '05-05-2024', '12-05-2024', 
           '19-05-2024', '26-05-2024', '02-06-2024', '09-06-2024', '16-06-2024', '23-06-2024', '30-06-2024', '07-07-2024', 
           '14-07-2024', '21-07-2024', '28-07-2024', '04-08-2024', '11-08-2024', '18-08-2024', '25-08-2024', '01-09-2024', 
           '08-09-2024', '15-09-2024', '22-09-2024', '29-09-2024', '06-10-2024', '13-10-2024', '20-10-2024', '27-10-2024', 
           '05-11-2024', '12-11-2024', '19-11-2024', '26-11-2024', '03-12-2024', '10-12-2024', '17-12-2024'
],
      values: [0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,
        0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,
         0.00, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12,
          -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, 
          -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, 
          -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, 
          -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, 
          -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, 
          -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, -0.12, 
          -0.12, -0.12, -0.12, -0.12, -0.12],
      info: {
        instrument: "210610",
        location: "Level 13 South 49 X-cut",
        installation: "From May 2022 to Dec 2024",
        temp: "23°C",
        height: "12 Mtr",
        observation: "The reading of load cells is fairly constant over time. But on 2.12.2022 at 13.5th level the development resumed on 49th X-CUT after some time and on that day the blasting operation was conducted at the same level for production. This resulted in deviation of reading in the Load Cell.",
      },
    },
  };

  const selectedData = dataSets[selectedCrossCut] || {
    labels: [],
    values: [],
    info: {
      instrument: "N/A",
      location: "Select a location",
      installation: "N/A",
      temp: "N/A",
      height: "N/A",
      observation: "Select a location to see observations.",
    },
  };

  return (
    <div className="w-full text-white bg-gray-500">
      <div className="text-white flex w-full h-min py-2 mb-1 font-bold">
        <p className="text-2xl bg-gray-900 w-full h-12 flex justify-center rounded-full items-center font-serif">
          Study of ground behaviour in underground metal mines vis-a-vis conventional and IoT-based instrumentation
        </p>
      </div>

      <div className="flex gap-4 m-5">
        <div className="flex-auto h-[815px] bg-gray-400"> 
          <Line
            data={{
              labels: selectedData.labels,
              datasets: [
                {
                  label: "Cumulative Difference",
                  data: selectedData.values,
                  backgroundColor: "rgba(255, 99, 132, 0.5)",
                },
              ],
            }}
            options={{
              responsive: true,
              plugins: {
                legend: { position: "top" },
                title: { display: true, text: "Load Cell" },
              },
            }}
          />

          {/* Location Selection Dropdown */}
      <div className="w-full h-auto mt-10 flex justify-center">
        <div className="relative inline-block text-left">
          <button
            type="button"
            className="inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white hover:bg-gray-100 px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset"
            onClick={() => setIsOpen(!isOpen)}
          >
            {selectedCrossCut || selectedLevel || "Select Location"}
            <svg className="-mr-1 size-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fillRule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clipRule="evenodd" />
            </svg>
          </button>

          {isOpen && (
            <div className="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white ring-1 shadow-lg ring-black/5">
              {Object.keys(levels).map((level) => (
                <div key={level} className="relative">
                  <button
                    className="w-full text-left px-4 py-2 hover:bg-gray-200 text-gray-900 cursor-pointer"
                    onClick={() => setSelectedLevel(selectedLevel === level ? null : level)}
                  >
                    {level}
                  </button>

                  {selectedLevel === level && (
                    <div className="mt-1 w-full bg-gray-100 text-gray-800 shadow-md rounded-md">
                      {levels[level].map((crossCut) => (
                        <div
                          key={crossCut}
                          className="px-4 py-2 hover:bg-gray-300 cursor-pointer"
                          onClick={() => {
                            setSelectedCrossCut(crossCut);
                            setIsOpen(false);
                          }}
                        >
                          {crossCut}
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
        </div>

        <div className="flex flex-col gap-4">
          <div className="h-[400px] w-[200px] bg-red-500  rounded-md p-1"> 
            <h1 className="font-bold mb-1">Information: </h1>
            <p> <span className="font-bold">Instrument S No:</span> {selectedData.info.instrument}</p>
            <p> <span className="font-bold">Location:</span> {selectedData.info.location}</p>
            <p> <span className="font-bold">Date of Installation:</span> {selectedData.info.installation}</p>
            <p> <span className="font-bold">Calibration Temp:</span> {selectedData.info.temp}</p>
            <p> <span className="font-bold">Stope Height:</span> {selectedData.info.height}</p>
          </div>

          <div className="h-[400px] w-[200px] p-1 bg-green-700 rounded-md"> 
            <h1 className="font-bold mb-1">Observation</h1>
            <p>{selectedData.info.observation}</p>
          </div>
        </div>
      </div>

      <div className='h-[100px] bg-gray-500'>
      <Link to="/" className="absolute -bottom-18 left-10 bg-[#3e3e3e] text-white px-4 py-2 rounded-lg hover:bg-[#222223] transition">
                    Home
      </Link>
      </div>
    </div>
  );
};

export default LoadCell;
